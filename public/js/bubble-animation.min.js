document.addEventListener("DOMContentLoaded",function(){const t=document.getElementById("bubbleContainer");if(!t)return;const e=Array.from(t.querySelectorAll(".bubble-item"));if(e.length===0)return;initPhysics(e);let n;window.addEventListener("resize",()=>{clearTimeout(n),n=setTimeout(()=>{updateInitialPositions(e)},200)}),startAnimationLoop(e)});function initPhysics(e){e.forEach(e=>{e.physics={ampX1:Math.random()*8+4,ampX2:Math.random()*5+2,ampY1:Math.random()*10+5,ampY2:Math.random()*6+3,freqX1:Math.random()*.001+5e-4,freqX2:Math.random()*.002+.001,freqY1:Math.random()*.001+5e-4,freqY2:Math.random()*.002+.001,phaseX1:Math.random()*Math.PI*2,phaseX2:Math.random()*Math.PI*2,phaseY1:Math.random()*Math.PI*2,phaseY2:Math.random()*Math.PI*2,isHovering:!1,scale:1,baseZIndex:1,x:0,y:0,renderX:0,renderY:0},bindEvents(e)}),updateInitialPositions(e)}function updateInitialPositions(e){e.forEach(e=>e.style.transform=""),e.forEach(e=>{e.physics.initialX=e.offsetLeft+e.offsetWidth/2,e.physics.initialY=e.offsetTop+e.offsetHeight/2,e.physics.radius=e.offsetWidth/2,e.physics.x=e.physics.initialX,e.physics.y=e.physics.initialY})}function bindEvents(e){e.addEventListener("mouseenter",()=>{e.physics.isHovering=!0,e.physics.scale=1.15,e.style.zIndex=100}),e.addEventListener("mouseleave",()=>{e.physics.isHovering=!1,e.physics.scale=1,setTimeout(()=>{e.physics.isHovering||(e.style.zIndex=e.physics.baseZIndex)},300)})}function startAnimationLoop(e){function t(n){const s=n;e.forEach(e=>{const t=e.physics,n=t.ampX1*Math.sin(s*t.freqX1+t.phaseX1)+t.ampX2*Math.cos(s*t.freqX2+t.phaseX2),o=t.ampY1*Math.sin(s*t.freqY1+t.phaseY1)+t.ampY2*Math.cos(s*t.freqY2+t.phaseY2);t.x=t.initialX+n,t.y=t.initialY+o});const o=3;for(let t=0;t<o;t++)for(let t=0;t<e.length;t++)for(let o=t+1;o<e.length;o++){const l=e[t],d=e[o],n=l.physics,s=d.physics,i=s.x-n.x,a=s.y-n.y,r=i*i+a*a,u=12,c=n.radius+s.radius+u;if(r<c*c&&r>.1){const l=r**.5,e=c-l,d=i/l,u=a/l,h=d*e*.5,m=u*e*.5;let t=.5,o=.5;n.isHovering&&!s.isHovering&&(t=.1,o=.9),!n.isHovering&&s.isHovering&&(t=.9,o=.1),n.x-=d*e*t,n.y-=u*e*t,s.x+=d*e*o,s.y+=u*e*o}}e.forEach(e=>{const t=e.physics,n=t.x-t.initialX,s=t.y-t.initialY,o=t.isHovering?-15:0,i=n*.15;t.renderX=n,t.renderY=s+o,e.style.transform=`translate3d(${t.renderX.toFixed(2)}px, ${t.renderY.toFixed(2)}px, 0) scale(${t.scale}) rotate(${i.toFixed(2)}deg)`}),requestAnimationFrame(t)}requestAnimationFrame(t)}